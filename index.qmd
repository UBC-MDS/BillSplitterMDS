---
title: "BillSplitterMDS"
---

# BillSplitterMDS

**2025-26 DSCI-524 Group 14** - A Python package to help groups split trip bills fairly among participants.

[![build](https://github.com/UBC-MDS/BillSplitterMDS/actions/workflows/build.yml/badge.svg)](https://github.com/UBC-MDS/BillSplitterMDS/actions/workflows/build.yml)
[![codecov](https://codecov.io/gh/UBC-MDS/BillSplitterMDS/branch/main/graph/badge.svg)](https://codecov.io/gh/UBC-MDS/BillSplitterMDS)
[![Documentation](https://img.shields.io/badge/docs-GitHub%20Pages-blue)](https://ubc-mds.github.io/BillSplitterMDS/)

## Overview

When a group of people travel together, different people often pay for different expenses throughout the trip. At the end, it can be complicated to figure out how much each person actually owes and how money should be transferred to settle all debts fairly.

**BillSplitterMDS** simplifies this process by:

1. Reading expense data from a CSV file
2. Validating the data (checking tax/tip ranges, required columns)
3. Calculating how much each person should pay based on shared items
4. Calculating how much each person actually paid
5. Computing the optimal transfers needed to balance everyone's contributions

## Installation

Install from TestPyPI:

```bash
pip install -i https://test.pypi.org/simple/ --extra-index-url https://pypi.org/simple/ billsplittermds
```

Or install from source:

```bash
git clone https://github.com/UBC-MDS/BillSplitterMDS.git
cd BillSplitterMDS
pip install -e .
```

## Full Usage Demonstration

Here's a complete example showing how to use all four functions in the package.

### Step 1: Prepare Sample Data

First, let's create a sample CSV file with trip expenses:

```{python}
import pandas as pd

# Create sample trip expense data
data = {
    'payer': ['Amy', 'Sam', 'Ben', 'Amy'],
    'item_name': ['Pasta Dinner', 'Taxi to Airport', 'Hotel Room', 'Drinks'],
    'item_price': [18.0, 40.0, 200.0, 30.0],
    'shared_by': ['Amy', 'Amy;Sam;Ben', 'Amy;Ben', 'Amy;Sam;Ben'],
    'tax_pct': [0.08, 0.08, 0.10, 0.08],
    'tip_pct': [0.15, 0.10, 0.00, 0.18]
}

# Save to CSV
df = pd.DataFrame(data)
df.to_csv('trip_expenses.csv', index=False)
print("Sample CSV created:")
print(df.to_string(index=False))
```

### Step 2: Load and Validate Data

Use `load_validate_data()` to read the CSV and validate that all values are within acceptable ranges:

```{python}
from billsplittermds import load_validate_data

# Load and validate the expense data
valid_df = load_validate_data('trip_expenses.csv')
print("Data loaded and validated successfully!")
print(f"  - {len(valid_df)} expense records")
print(f"  - Tax range: {valid_df['tax_pct'].min():.0%} to {valid_df['tax_pct'].max():.0%}")
print(f"  - Tip range: {valid_df['tip_pct'].min():.0%} to {valid_df['tip_pct'].max():.0%}")
```

### Step 3: Calculate What Each Person Should Pay

Use `split_by_item()` to calculate each person's fair share based on which items they consumed:

```{python}
from billsplittermds import split_by_item

# Calculate what each person should pay
should_pay = split_by_item(valid_df)
print("\nWhat each person SHOULD pay (based on items consumed):")
print(should_pay.to_string(index=False))
print(f"\nTotal: ${should_pay['should_pay'].sum():.2f}")
```

### Step 4: Calculate What Each Person Actually Paid

Use `individual_total_payments()` to sum up what each person actually spent:

```{python}
from billsplittermds import individual_total_payments

# Calculate what each person actually paid
actually_paid = individual_total_payments(valid_df)
print("\nWhat each person ACTUALLY paid (who paid the bills):")
print(actually_paid.to_string(index=False))
print(f"\nTotal: ${actually_paid['actually_paid'].sum():.2f}")
```

### Step 5: Calculate Transfers Needed

Use `amount_to_transfer()` to determine who owes money to whom:

```{python}
from billsplittermds import amount_to_transfer

# Calculate the transfers needed to settle up
transfers = amount_to_transfer(should_pay, actually_paid)
print("\nTransfers needed to settle all debts:")
if len(transfers) == 0:
    print("  No transfers needed - everyone is settled!")
else:
    for _, row in transfers.iterrows():
        print(f"  {row['sender']} -> {row['receiver']}: ${row['amount']:.2f}")
```

### Cleanup

```{python}
# Clean up the sample file
import os
os.remove('trip_expenses.csv')
print("\nDemo complete! Sample file cleaned up.")
```

## Input CSV Format

Your CSV file must have these columns:

| Column | Description | Valid Range | Example |
|--------|-------------|-------------|---------|
| `payer` | Name of person who paid | Any string | Amy |
| `item_name` | Description of expense | Any string | Pasta |
| `item_price` | Price before tax/tip | >= 0 | 18.00 |
| `shared_by` | Names separated by semicolons | Any string | Amy;Ben |
| `tax_pct` | Tax as decimal | 0.05 to 0.15 | 0.08 |
| `tip_pct` | Tip as decimal | 0.00 to 0.50 | 0.15 |

## API Reference

See the [API Reference](reference/index.qmd) for detailed function documentation including parameters, return types, and examples.

## Contributing

Interested in contributing? Check out the [Contributing Guidelines](CONTRIBUTING.md) and [Code of Conduct](CODE_OF_CONDUCT.md).

## License

BillSplitterMDS is licensed under the MIT License.
